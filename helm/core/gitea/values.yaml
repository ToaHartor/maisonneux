s3:
  secretName: &s3-secret gitea-s3user
  bucketName: &bucket gitea
  endpoint: &bucket-endpoint "localhost:9000"
  customDomain: &custom-domain "localhost:9000/gitea"

database:
  name: gitea
  user: gitea

redis:
  url: dragonfly-cluster.dragonfly.svc.cluster.local

ingress:
  host: git.example.com
  certSecret: ingress-tls

gitea:
  resources:
    limits:
      cpu: 1000m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 512Mi

  gitea:
    additionalConfigSources:
      - configMap:
          name: gitea-app-ini
      # - secret:
      #     name: gitea-app-ini-secret
    # TODO : try when cluster is live
    # oauth:
    #   - name: "Authentik"
    #     provider: "openidConnect"
    #    # Existing secret contains key: as accessKey and secret: as secretKey
    #     existingSecret: gitea-oauth-secret
    #     autoDiscoverUrl: "https://auth.example.com/.well-known/openid-configuration"

  # TODO : check signing (trust-manager ?)
  # https://gitea.com/gitea/helm-chart/#configure-commit-signing
  # signing:
  #   enable: true
  #   existingSecret: gitea-gpg-secret

  persistence:
    enabled: false

  # Disable embedded postgresql
  postgresql:
    enabled: false
  postgresql-ha:
    enabled: false
  # Disable embedded valkey
  valkey-cluster:
    enabled: false
  # TODO : Requires prometheus operator
  # https://gitea.com/gitea/helm-chart/#metrics-and-profiling
  # metrics:
  #   enabled: true
  #   serviceMonitor:
  #     enabled: true